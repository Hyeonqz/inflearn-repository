# Practical Test - 실용적인 테스트 가이드

## 학습 내용
- 테스트 코드가 필요한 이유
- 좋은 테스트 코드란 무엇일까?
- 실제 실무에서 진행하는 방식 그대로 테스트를 작성해가면서 API를 설계하고 개발하는 방법
- 구체적인 이유에 근거한 상세헌 테스트 작성 팁

테스트 코드를 작성함으로써 얻을 수 있는 것
- 팀원간 빠른 피드백
- 테스트 자동화
- 어플리케이션 안정감


### 테스트 코드를 작성하지 않는다면?
- 변화가 생기는 매순간마다 발생할 수 있는 모든 Case 고려
- 변화가 생기는 매순간마다 모든 팀원이 동일한 고민을 해야함
- 빠르게 변화하는 소프트웨어의 안정성으루 보장할 수 없음


### 반면 테스트 코드가 병목이 된다면?
- 프로덕션 코드의 안정성을 제공하기 힘듬
- 테스트 코드 자체가 유지보수하기 어려운, 새로운 짐이 된다. -> 안짜는게 나을 수도..
- 잘못된 검증이 이루어질 가능성이 생긴다.

### 그렇다면 올바른 테스트 코드는?
- 자동화 테스트로 비교적 빠른 시간안에 버그를 발견할 수 있고, 수동 테스트에 드는 비용을 크게 절약할 수 있다.
- 소프트웨어의 빠른 변화를 지원한다.
- 팀원들의 집단 지성을 팀 차원의 이익으로 승격시킨다.
- 가까이 보면 느리지만, 멀리 보면 가장 빠른것이 테스트 이다.

결론은 테스트는 귀찮지만, 해야한다 <br><br>


### 요구사항
- 주문 목록에 음료 추가/삭제 기능
- 주문 목록 전체 지우기
- 주문 목록 총 금액 계산하기
- 주문 생성하기

#### 수동 테스트 vs 자동화된 테스트
수동 테스트? -> System.out.println() 을 통한 사람이 직접 값 체크 <br>
자동화 테스트? -> Junit5 를 사용하여 테스트 주체를 기계로 하여 검증을 해준다 <br>

### 단위 테스트
- 작은 코드 단위(클래스,메소드) 를 독립적으로 검증하는 테스트
  - 독립적? -> 외부의 개입을 받지 않는다 Ex) repository, 외부 api 호출
- 검증 속도가 빠르고, 안정적이다

어떻게 테스트를 할까? -> Junit5, AssertJ 사용 <br>
- AssertJ -> 풍부한 API, 메소드 체이닝 지원 <br>

#### 테스트 케이스 세분화하기
1. 해피 케이스
2. 예외 케이스

어떠한 경계값이 존재한다면, 경계값 테스트가 필요하다 ex) 범위, 구간, 날짜 <br>
```java
	@Test
    void add_count_throw_test() {
    CafeKiosk cafeKiosk = new CafeKiosk();
    Americano americano = new Americano();

    Assertions.assertThatThrownBy(() -> cafeKiosk.add(americano,0))
    .isInstanceOf(IllegalArgumentException.class)
    .hasMessage("음료는 1잔 이상 주문하실 수 있습니다.");
    }
```

위 코드는 일반적인 경계값 예외 케이스 테스트 이다. <br>


### 테스트 하기 어려운 영역?
- 관측할 때 마다 다른 값에 의존하는 코드
  - 현재 날짜/시간, 랜덤 값
- 외부 세계에 영향을 주는 코드
  - 표준 출력, 메시지 발송, 데이터베이스에 기록하기 등

테스트를 쉽게하려면?
- 같은 입력에는 항상 같은 결과
- 외부 세상과 단절된 형태
- 테스트하기 쉬운 코드


### TDD(Test Driven Development)
- RED - GREEN - REFACTOR (레드-그린-리팩토링)

애자일 방법론 안에 익스트림 프로그래밍을 실천할 때 TDD 를 주로 사용한다 <br>

